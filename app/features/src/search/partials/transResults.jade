.transForm_feedback
    .panel.panel-default.transForm_results
        .panel-heading
            .row
                .col-md-6
                    h2.panel-title Transaction Results
                        span # of transations
                .col-md-6
                    p action buttons
        .panel-body
            accordion
                table.table(st-table="shownData" st-safe-src="transData")
                    thead
                        tr
                            th(colspan="13")
                                input.form-control(st-search="" type="text" placeholder="Filter through all search results...")
                        tr
                            th Trans ID
                            th Type
                            th Gateway
                            th MID Name
                            th Date
                            th Amount
                            th CC Type
                            th #CC
                            th Status
                            th First Name
                            th Last Name
                            th(style="width:10%") Email
                            th(style="width:20%") Actions
                    tbody(ng-repeat="tran in shownData")
                        tr
                            td.search-results-trans-id
                                a.row_btn.peter_river_btn.full_width(ng-click="open(tran)" ng-controller="transModalCtrl")
                                    i.fa.fa-eye
                                    span {{tran.TransactionId}}
                            td {{tran.Type}}
                            td {{tran.Gateway}}
                            td {{tran.MidDisplayName}}
                            td {{tran.RequestDate | date:'shortDate'}}
                            td {{tran.Amount}}
                            td {{tran.PaymentTypeName}}
                            td {{tran.CcLastFour}}
                            td Status Output
                            td {{tran.FirstName}}
                            td {{tran.LastName}}
                            td {{tran.Email}}
                            td
                                a(ng-click="open(tran)" ng-controller="refundModalCtrl")
                                    //i.fa.fa-money
                                    span Refund
                                a(ng-click="open(tran)" ng-controller="voidModalCtrl")
                                    //i.fa.fa-money
                                    span Void
                                a(ng-click="shownData[$index].open = !shownData[$index].open")
                                    //i.fa.fa-eye
                                    span Trans
                            //td.paymentTypes
                                div(ng-if="trans.Type == 'Authorize' && trans.ResultCode == 0")
                                    a.alazarin_btn.search_width.margin-right(tooltip="Void transaction: {{trans.TransactionId}}" tooltip-placement="top" ng-click="open(trans)" href="" ng-controller="voidModalCtrl") 
                                      i.fa.fa-ban
                                      span void
                                    a.orange_btn.search_width.disabled(tooltip="Unable to refund with type as authorize" tooltip-placement="top")
                                      i.fa.fa-money
                                      span Refund

                                div(ng-if="trans.Type == 'Capture' || trans.Type == 'Charge' && trans.ResultCode == 0")
                                  a.alazarin_btn.search_width.margin-right(tooltip="Void transaction: {{trans.TransactionId}}" ng-click="open(trans)" href="" ng-controller="voidModalCtrl")
                                    i.fa.fa-ban
                                    span void
                                  a.orange_btn.search_width(tooltip="Refund transaction: {{trans.TransactionId}}" ng-click="open(trans)" href="" ng-controller="refundModalCtrl")
                                    i.fa.fa-money
                                    span Refund
  
                                div(ng-if="trans.Type == 'Void' || trans.Type == 'Refund' || trans.Type == 'Credit' || trans.ResultCode !== 0")
                                  a.alazarin_btn.search_width.margin-right.disabled(tooltip="Unable to void with this processed type" tooltip-placement="top")
                                    i.fa.fa-ban
                                    span void
                                  a.orange_btn.search_width.disabled(tooltip="Unable to refund with this processed type" tooltip-placement="top")
                                    i.fa.fa-money
                                    span Refund
                                div
                                  a.peter_river_btn
                                    i.fa.fa-eye
                                    span Trans

                            td
                                tr
                                    td.pushToggle(colspan="13")
                                        accordion-group(heading="" is-open="tran.open")
                                            h2 
                                                i.fa.fa-exchange
                                                span Related Transactions
                                            table.table.table-striped
                                                thead
                                                    tr
                                                        th Transaction ID
                                                        th API User
                                                        th Amount
                                                        th Type
                                                        th Status
                                                        th Gateway
                                                        th Name
                                                        th MID
                                                        th Payment Type
                                                        th Date
                                                tbody {{getNestedApiUser(tran)}}
                                                    tr(ng-repeat="thing in nestedTrans")
                                                        td {{thing.TransactionId}}
                                                        td {{thing.ApiUser}}
                                                        td {{thing.Amount}}
                                                        td {{thing.Type}}
                                                        td {{thing.ResultCode}}
                                                        td {{thing.Gateway}}
                                                        td {{thing.MidDisplayName}}
                                                        td {{thing.Mid}}
                                                        td {{thing.PaymentTypeName}}
                                                        td {{thing.RequestDate  | date:'shortDate'}}
                                                        
                                                        